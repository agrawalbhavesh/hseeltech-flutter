## Hseeltech - Real Estate Investment Platform
## Flutter Development Rules for Cursor AI

### Project Overview
Hseeltech (حصيلتك) is a Saudi real estate fractional investment platform. Users can browse tokenized real estate opportunities, invest with as little as 500 SAR, track portfolio performance, and manage their wallet. The app supports Arabic (RTL) and English (LTR) with Montserrat Arabic font.

### Brand Identity
- Name: "Hseeltech" (lowercase 't' in tech) | Arabic: "حصيلتك"
- Primary Color: #16A34A (green - trust & growth)
- Navy: #0A1628 (professionalism)
- Gold: #CA8A04 (premium features)
- Font: Montserrat Arabic (all weights: 300-800)

### Architecture Rules
- Use **Clean Architecture** with feature-based folder structure
- State management: **BLoC/Cubit** pattern (flutter_bloc package)
- Navigation: **GoRouter** with typed routes and deep linking
- API layer: **Dio** HTTP client with interceptors for auth tokens
- Local storage: **SharedPreferences** for settings, **Hive** for offline cache
- Dependency injection: **get_it** + **injectable**

### Code Style Rules
1. Always use `const` constructors where possible
2. All widgets must be in separate files (one widget per file)
3. Use named parameters for constructors with more than 2 parameters
4. Prefix private variables with underscore
5. Use `final` for variables that don't change
6. All strings must use localization (AppLocalizations) - never hardcode text
7. All colors must reference `HseelColors` constants - never hardcode hex values
8. All text styles must reference `HseelTypography` - never hardcode font sizes
9. All spacing must use `HseelSpacing` constants
10. All assets must be referenced via `HseelAssets` constants

### File Naming Convention
- Files: `snake_case.dart` (e.g., `home_screen.dart`, `opportunity_card.dart`)
- Classes: `PascalCase` (e.g., `HomeScreen`, `OpportunityCard`)
- BLoC files: `feature_bloc.dart`, `feature_event.dart`, `feature_state.dart`
- Cubit files: `feature_cubit.dart`, `feature_state.dart`
- Model files: `feature_model.dart`
- Widget files: descriptive name (e.g., `property_stats_row.dart`)

### Widget Rules
- Minimum touch target: 44x44 points (iOS) / 48x48 dp (Android)
- All interactive elements must have visible focus indicators
- Support Dynamic Type / Font Scaling (up to 200%)
- Add haptic feedback on key interactions (button press, success, error)
- Support reduced motion (disable animations when system setting is on)
- All icons use Lucide Icons library (lucide_icons package)

### RTL/Localization Rules
- App supports Arabic (ar) and English (en)
- Default language: Arabic
- Use `Directionality` aware widgets
- Replace Left/Right with Start/End in all padding/margin
- Mirror all directional icons in RTL mode
- Numbers always display in English numerals (Western Arabic)
- Currency format: "500 SAR" (English) | "٥٠٠ ر.س" (Arabic)

### Color System (reference HseelColors class)
```
Primary:        #16A34A  (buttons, CTAs, active states)
Primary Light:  #22C55E  (hover, success indicators)
Primary Pale:   #DCFCE7  (light backgrounds, badges)
Gold:           #CA8A04  (premium, rewards)
Navy:           #0A1628  (dark backgrounds, headings)
Error:          #EF4444  (errors, negative returns)
Warning:        #F59E0B  (pending states)
Info:           #3B82F6  (informational)
```

### Dark Mode
- Support automatic dark mode switching via system setting
- Colors mapped via semantic tokens (not hardcoded)
- Dark background: #0A1628
- Dark surface: #132240
- Dark card: #1A3058
- Dark border: #1E3A5F

### Typography Scale (reference HseelTypography class)
```
Display:    32px / ExtraBold  (splash, hero)
H1:         28px / Bold       (page titles)
H2:         24px / Bold       (section headers)
H3:         20px / SemiBold   (card titles)
Body Large: 16px / Regular    (primary body)
Body:       14px / Regular    (default body)
Body Small: 12px / Regular    (secondary text)
Caption:    11px / Medium     (labels, timestamps)
Button:     14px / SemiBold   (standard buttons)
Tab:        11px / Medium     (bottom nav labels)
```

### Screen Dimensions
- Design width: 390px (iPhone 14 Pro)
- Safe area top: 59px
- Safe area bottom: 34px
- Bottom nav height: 83px (49px nav + 34px safe area)
- Default corner radius: 12px
- Card shadow: 0 2px 8px rgba(10,22,40,0.08)

### Animation Guidelines
- Forward navigation: Slide Left, 300ms, easeInOutCubic
- Back navigation: Slide Right, 250ms, easeInOutCubic
- Modal present: Slide Up, 350ms, spring(1, 0.85, 0)
- Modal dismiss: Slide Down, 250ms, easeOut
- Tab switch: Cross Fade, 200ms, easeInOut
- Button press: scale(0.97), 100ms
- Card press: scale(0.98), 150ms
- Skeleton shimmer: 1500ms infinite linear gradient sweep
- Number counter: 800ms, easeOutExpo

### Navigation Structure
Bottom navigation with 5 tabs:
1. Home (الرئيسية) - Dashboard with featured properties
2. Explore (استكشاف) - Browse all properties with filters
3. Invest (استثمار) - Portfolio overview
4. Rewards (المكافآت) - Referral & rewards program
5. Profile (حسابي) - User profile & settings

### Key User Flows
1. **Registration**: Splash → Welcome → Onboarding → Register (phone) → Nafath → KYC → PIN → Biometric
2. **Investment**: Explore → Property Detail → Invest Flow → Wallet Check → Confirm → Success
3. **Bank Account**: Profile → Bank Account → Add Bank → Open Banking Verification
4. **Deposit/Withdraw**: Wallet → Deposit/Withdraw → Amount → Bank Selection → Confirm
5. **Profile Management**: Profile → Edit Profile / Settings / Notifications

### Data Models
- User: id, nationalId, fullNameAr, fullNameEn, phone, email, kycStatus, riskProfile
- Property: id, title, type, location, tokenPrice, totalTokens, soldTokens, expectedReturn, netYield, distribution, status
- Investment: id, userId, propertyId, tokenCount, totalAmount, purchaseDate, status, returns, nextDistribution
- Transaction: id, userId, type, amount, status, method, createdAt, reference
- BankAccount: id, userId, bankName, iban, beneficiaryName, isVerified, isPrimary

### Saudi Regulatory Compliance
- Regulated by الهيئة العامة للعقار (General Real Estate Authority)
- KYC via Nafath (National Single Sign-On)
- IBAN format: SA + 22 digits
- All financial terms must comply with Islamic Sharia principles
- Safe Note conditions must be Sharia-compliant

### Package Dependencies (recommended)
```yaml
dependencies:
  flutter_bloc: ^8.1.0
  go_router: ^14.0.0
  dio: ^5.4.0
  get_it: ^7.6.0
  injectable: ^2.3.0
  shared_preferences: ^2.2.0
  hive: ^2.2.0
  hive_flutter: ^1.1.0
  lucide_icons: ^0.257.0
  intl: ^0.19.0
  flutter_localizations:
    sdk: flutter
  cached_network_image: ^3.3.0
  shimmer: ^3.0.0
  fl_chart: ^0.68.0
  pinput: ^4.0.0
  local_auth: ^2.2.0
  url_launcher: ^6.2.0
  firebase_core: ^2.27.0
  firebase_analytics: ^10.8.0
  firebase_crashlytics: ^3.4.0

dev_dependencies:
  injectable_generator: ^2.4.0
  build_runner: ^2.4.0
  flutter_lints: ^3.0.0
  bloc_test: ^9.1.0
  mocktail: ^1.0.0
```

### When generating code, always:
1. Import from the correct feature folder
2. Use BLoC/Cubit for state management
3. Handle loading, success, and error states
4. Add proper error handling with try/catch
5. Use semantic color tokens from HseelColors
6. Follow the typography scale from HseelTypography
7. Add proper Arabic/English localization keys
8. Ensure RTL compatibility
9. Add haptic feedback for interactive elements
10. Include skeleton loading states
